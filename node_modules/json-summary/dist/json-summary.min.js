// https://andrewtburks.dev/json-summary v1.3.0 Copyright 2020 Andrew Burks
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).jsonSummary=t()}(this,function(){"use strict";let e=10,t=" ",n=2,r=!0,s=!1,a="dark";var l=Object.freeze({__proto__:null,arraySampleCount:e,indentation:t,indentCount:n,showExampleValue:r,startExpanded:s,theme:a});return{defaults:l,summarize:function(t,{arraySampleCount:n=e}=l){let r=function e(t){let r={Array:t=>{let r={count:1,type:"Array",length:t.length};if(t.length)if(n>0){let a="all"===n?t.length:Math.min(n,t.length),l={};for(;a>0;){let e=Math.floor(Math.random()*t.length);l.hasOwnProperty(e)||(l[e]=t[e],a--)}let u=[];for(let t of Object.entries(l)){let n=t[1];u.push(e(n))}let c=s(u);r.items={0:c}}else r.items={0:e(t[0])};else r.items={0:void 0};return r},Object:t=>{let n={count:1,type:"Object",keys:Object.keys(t),items:{}};for(let r of n.keys)n.items[r]=e(t[r]);return n},Other:e=>{let t;return"string"==typeof e?t=[e.length,e.length]:"number"==typeof e&&(t=[e,e]),{type:typeof e,example:e,count:1,range:t}}},a="Other";return t instanceof Array?a="Array":t instanceof Object&&(a="Object"),t&&t["*snippets_mark*"]?{type:a,circular:!0}:("Other"!==a&&(Object.defineProperty(t,"*snippets_mark*",{enumerable:!1,writable:!0,configurable:!0}),t["*snippets_mark*"]=!0),r[a](t))}(t);return function e(t){if(t&&t["*snippets_mark*"])if(delete t["*snippets_mark*"],t instanceof Array&&t.length)t.forEach(t=>e(t));else if(t instanceof Object)for(let n of Object.keys(t))e(t[n])}(t),r;function s(e){let t={Array:!0,Object:!0,boolean:!0,string:!0,number:!0},n=e.filter(e=>t[e.type]);if(n.length){let e=n[0].type;return function(e,t){return e=e.filter(e=>e.type===t),{string:function(e){let t=e.reduce((e,t)=>Math.min(e,t.range[0]),1/0),n=e.reduce((e,t)=>Math.max(e,t.range[1]),-1/0);return{type:"string",example:e[0].example,range:[t,n],count:e.reduce((e,t)=>e+t.count,0)}},number:function(e){let t=e.reduce((e,t)=>Math.min(e,t.range[0]),1/0),n=e.reduce((e,t)=>Math.max(e,t.range[1]),-1/0);return{type:"number",example:e[0].example,range:[t,n],count:e.reduce((e,t)=>e+t.count,0)}},boolean:function(e){return{type:"boolean",example:e[0].example,count:e.reduce((e,t)=>e+t.count,0)}},Object:function(e){let t={};for(let n of e)if(!n.circular)for(let e of n.keys)!t[e]&&(t[e]=[]),t[e].push(n.items[e]);let n={type:"Object",keys:[],items:{},count:e.length};for(let e of Object.keys(t))n.keys.push(e),n.items[e]=s(t[e]);return n},Array:function(e){let t=s(e.map(e=>e.items[0]).filter(e=>e));return{count:e.length,items:{0:t},length:t.count/e.length,type:"Array"}}}[t](e)}(n.filter(t=>t.type===e),e)}return{count:0}}},printSummary:function(e,{indentation:u=t,indentCount:c=n,showExampleValue:m=r,startExpanded:o=s,theme:i=a,asText:y=!1,asJson:p=!1}=l){const f=y?"":", ";let h,d=0;return y?g(e,0):p?JSON.parse(g(e,0)):`<div class="theme ${i}"><div class='json-summary-wrapper'>`+g(e,0)+"<div></div>";function g(e,t){let n="";if(e.circular)n+=j("(circular reference)","circular");else if("Object"===e.type){y||(n+="{"),n+=j(e.keys.map(e=>`'${e}'`).join(f),"keys"),t===d&&(h=!1);let s=e.keys.map(n=>g(e.items[n],t+1));if(s.length){let a="\n";for(let n=0;n<e.keys.length;n++){if(a+=u.repeat((t+1)*c),a+=j(e.keys[n],"name")+": ",e.count>1){let t=(e.items[e.keys[n]].count/e.count*100).toFixed(2);p&&(a+='"'),a+=y||p?t+"% ":`<div class="json-summary json-summary-bar" title="${r=t}%"><div class="json-summary json-summary-percentage" style="width:${r}%;"></div></div>`}a+=s[n],n<e.keys.length-1&&(a+=f),a+="\n"}n+=j(a+=u.repeat(t*c),"child")}y||(n+="}"),n=j(n,"layer")}else if("Array"===e.type){let r=e.length&&("Object"===e.items[0].type||"Array"===e.items[0].type),s=j(e.count>1?"Î¼ = "+e.length.toFixed(1):e.length,"length")+(p?"":" [");e.count>1&&(s=s.slice(1)),r&&p||(n+=s),e.length&&(r&&p&&(e.items[0].items["<summary>"]={type:"array",example:s.replace(/"/,""),keys:[],items:{},count:e.items[0].count},e.items[0].keys.unshift("<summary>")),n+=g(e.items[0],t+1,e.count),r&&(n+="\n"+u.repeat(t*c))),p||(n+="]")}else null==e.example||null==e.example?n+=j("?","type"):n+=j(e.type,"type"),m&&(n+=j(e.example,"example",e.type),e.count>1&&e.range&&(n+=j(e.range,"range",e.type)));var r;return d=t,n}function j(e,t,n){return y?function(e,t){switch(t){case"type":return`<${e}>`;case"length":return`(${e})`;case"layer":return e;case"value":case"example":case"name":case"child":case"circular":return` ${e}`;default:return""}}(e,t):p?function(e,t){const n=h?" ":'"',r=m?" ":'"';switch(t){case"example":return`${e}"`;case"type":return`${n}<${e}>${r}`;case"length":return h=!0,`"(${e})`;case"layer":case"value":case"child":return e;case"name":case"circular":return` "${e}"`;default:return""}}(e,t):function(e,t,n){let r={type:()=>`<span class="json-summary json-summary-type json-summary-type-${e}">&lt;${e}&gt;</span>`,value:()=>`<span class="json-summary json-summary-value json-summary-value-${n}">${e}</span>`,range:()=>`<span class="json-summary json-summary-range json-summary-range-${n}">[${e[0]}, ${e[1]}]</span>`,name:()=>`<span class="json-summary json-summary-name">${e}</span>`,length:()=>`<span class="json-summary json-summary-length">(${e})</span>`,circular:()=>`<span class="json-summary json-summary-circular">${e}</span>`,layer:()=>`<span class="json-summary json-summary-checkbox ${o?"checked":""}">\n              <input type="checkbox" ${o?"checked":""}>\n              <span class="json-summary-checkboxmarker" onclick="(function(me){\n                me.parentNode.classList.toggle('checked');\n              })(this)"></span>\n            </span><div class="json-summary json-summary-layer">${e}</div>`,child:()=>`<div class="json-summary json-summary-child">${e}</div>`,keys:()=>`<span class="json-summary json-summary-keys">${e}</span>`};return r.example=r.value,r[t]()}(e,t,n)}}}});
